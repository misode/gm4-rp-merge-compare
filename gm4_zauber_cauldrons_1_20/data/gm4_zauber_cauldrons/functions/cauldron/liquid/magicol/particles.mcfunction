# particles displayed over a cauldron when it is filled with magicol
# @s = zauber cauldron with valid structure
# at @s align xyz
# run from gm4_zauber_cauldrons:cauldron/liquid/magicol/check_liquid_id

# display enchant particles for players with full zauber armor during the correct moon phase
scoreboard players reset $preferred gm4_zc_moon_phase
execute store result score $preferred gm4_zc_moon_phase run data get storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid.magicol.moon_phase
execute if function gm4_zauber_cauldrons:cauldron/liquid/magicol/check_moon_phase run particle minecraft:electric_spark ~0.5 ~0.78 ~0.5 0.25 0.25 0.25 0.01 6 normal @a[distance=..8, advancements={gm4_zauber_cauldrons:equipment/has_full_armor=true}]

# make sure the cauldron is in loaded chunks to avoid entity buildup
execute unless loaded ~ ~ ~ run return -1

# if liquid id is magicol, display particles
# generated with the help of bolt

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"white"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:14475494}

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"light_gray"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:8419701}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"gray"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:4146765}

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"black"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:2038574}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"brown"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:9199935}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"red"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:10891826}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"orange"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:14254913}

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"yellow"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:16105801}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"lime"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:6927140}

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"green"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:7045184}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"cyan"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:3580595}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"light_blue"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:3579353}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"blue"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:4672435}

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"purple"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:7744947}
execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"magenta"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:12207538}

execute unless score $displayed_magicol_particle gm4_zc_data matches 1.. store success score $displayed_magicol_particle gm4_zc_data if data storage gm4_zauber_cauldrons:temp/cauldron/ingredients liquid{id:"magicol",magicol:{color:"pink"}} unless entity @e[type=area_effect_cloud, dx=0, limit=1] run summon area_effect_cloud ~0.5 ~0.75 ~0.5 {CustomName:'"gm4_zc_magicol_particle"',Tags:["gm4_zc_magicol_particle"],Particle:"entity_effect",Radius:0.1f,Duration:10,Color:15108779}
scoreboard players set $displayed_liquid_particle gm4_zc_data 1
scoreboard players reset $displayed_magicol_particle gm4_zc_data
